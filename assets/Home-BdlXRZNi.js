import{_ as g,i as L,a as y}from"./apiClient-pAtkYp1m.js";import{o as i,c as d,a as r,t as h,b as x,n as C,w as b,v as S,r as v,d as w,e as O,f,F as I,g as F,h as _}from"./index-xKW8qaUr.js";const T="/LessonApp-3144_frontend/assets/defaultimg-BTvJdqlX.png",N={name:"LessonCard",props:{lesson:{type:Object,required:!0}},computed:{formattedPrice(){const e=parseFloat(this.lesson.price.replace(/[^0-9.-]+/g,""));return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e)}},methods:{addToCart(){if(this.lesson.spaces>0){this.lesson.spaces--;const e=JSON.parse(localStorage.getItem("cart"))||[];e.push({...this.lesson,quantity:1}),localStorage.setItem("cart",JSON.stringify(e)),this.$emit("update-cart"),L(`${this.lesson.subject} added to the cart!`,{type:"success",autoClose:2e3})}},setDefaultImage(e){e.target.src=T}}},A={class:"lesson-card border rounded-lg shadow-lg bg-white transition-transform transform hover:scale-105 hover:shadow-xl"},B={class:"lesson-image-container w-full h-48 overflow-hidden"},J=["src"],$={class:"p-4"},j={class:"lesson-title font-semibold text-xl text-gray-800 mb-2"},k={class:"lesson-location text-gray-600 text-sm"},D={class:"lesson-price text-green-600 font-semibold text-lg mt-2"},V={class:"lesson-availability text-gray-500 text-sm mt-1"},E=["disabled"];function P(e,t,o,c,n,a){return i(),d("div",A,[r("div",B,[r("img",{src:`https://lessonsapp-backend.onrender.com${o.lesson.image}`,onError:t[0]||(t[0]=(...s)=>a.setDefaultImage&&a.setDefaultImage(...s)),alt:"Lesson Image",class:"w-full h-40 object-cover mb-4"},null,40,J)]),r("div",$,[r("h3",j,h(o.lesson.subject),1),r("p",k,h(o.lesson.location),1),r("p",D,h(a.formattedPrice),1),r("p",V,[t[2]||(t[2]=x(" Spaces left: ")),r("span",{class:C(o.lesson.spaces===0?"text-red-500":"text-gray-500")},h(o.lesson.spaces),3)]),r("button",{disabled:o.lesson.spaces===0,onClick:t[1]||(t[1]=(...s)=>a.addToCart&&a.addToCart(...s)),class:"add-to-cart-btn mt-4 w-full bg-green-500 text-white p-2 rounded-lg text-lg transition-colors duration-300 ease-in-out hover:bg-green-600 disabled:bg-gray-400"}," Add to Cart ",8,E)])])}const U=g(N,[["render",P],["__scopeId","data-v-487fbd3f"]]),q={name:"LessonFilter",props:{sortAttribute:String,sortOrder:String},emits:["update-sort"],data(){return{selectedAttribute:this.sortAttribute,selectedOrder:this.sortOrder}},methods:{updateSortOptions(){this.$emit("update-sort",this.selectedAttribute,this.selectedOrder)}}},G={class:"lesson-filter my-4 ml-4 flex items-center gap-4"};function H(e,t,o,c,n,a){return i(),d("div",G,[b(r("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.selectedAttribute=s),onChange:t[1]||(t[1]=(...s)=>a.updateSortOptions&&a.updateSortOptions(...s)),class:"p-2 border rounded"},t[4]||(t[4]=[r("option",{value:"subject"},"Subject",-1),r("option",{value:"location"},"Location",-1),r("option",{value:"price"},"Price",-1),r("option",{value:"spaces"},"Spaces",-1)]),544),[[S,n.selectedAttribute]]),b(r("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.selectedOrder=s),onChange:t[3]||(t[3]=(...s)=>a.updateSortOptions&&a.updateSortOptions(...s)),class:"p-2 border rounded"},t[5]||(t[5]=[r("option",{value:"asc"},"Ascending",-1),r("option",{value:"desc"},"Descending",-1)]),544),[[S,n.selectedOrder]])])}const M=g(q,[["render",H],["__scopeId","data-v-e037c4d4"]]),z=async()=>{try{return await y.get("/lessons")}catch(e){return console.error("Error fetching lessons:",e),[]}},X={name:"LessonsList",components:{LessonCard:U,LessonFilter:M},setup(){const e=v([]),t=v("subject"),o=v("asc"),c=async()=>{try{e.value=await z()}catch(s){console.error("Error fetching lessons:",s)}};w(()=>{c()});const n=O(()=>{const s=[...e.value];return s.sort((l,m)=>{const u=l[t.value],p=m[t.value];return typeof u=="string"?o.value==="asc"?u.localeCompare(p):p.localeCompare(u):typeof u=="number"?o.value==="asc"?u-p:p-u:0}),s});return{lessons:e,sortedLessons:n,sortAttribute:t,sortOrder:o,updateSort:(s,l)=>{t.value=s,o.value=l}}}},K={class:"lesson-list grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 p-4"};function Q(e,t,o,c,n,a){const s=_("LessonFilter"),l=_("LessonCard");return i(),d("div",null,[f(s,{"sort-attribute":c.sortAttribute,"sort-order":c.sortOrder,onUpdateSort:c.updateSort},null,8,["sort-attribute","sort-order","onUpdateSort"]),r("div",K,[(i(!0),d(I,null,F(c.sortedLessons,m=>(i(),d("div",{key:m.id,class:"lesson-item bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-xl"},[f(l,{lesson:m},null,8,["lesson"])]))),128))])])}const R=g(X,[["render",Q]]),W={name:"CartButton",data(){return{cartLength:this.getCartLengthFromLocalStorage()}},methods:{navigateToCart(){this.$router.push({name:"cart"})},getCartLengthFromLocalStorage(){return(JSON.parse(localStorage.getItem("cart"))||[]).length},addToCart(e){const t=JSON.parse(localStorage.getItem("cart"))||[];t.push(e),localStorage.setItem("cart",JSON.stringify(t)),this.cartLength=t.length},removeFromCart(e){let t=JSON.parse(localStorage.getItem("cart"))||[];t=t.filter(o=>o.id!==e),localStorage.setItem("cart",JSON.stringify(t)),this.cartLength=t.length}}},Y=["disabled"];function Z(e,t,o,c,n,a){return i(),d("div",null,[r("button",{disabled:n.cartLength===0,onClick:t[0]||(t[0]=(...s)=>a.navigateToCart&&a.navigateToCart(...s)),class:C([{"bg-green-500 text-white":n.cartLength>0,"bg-gray-300 text-gray-500 cursor-not-allowed":n.cartLength===0},"py-2 mt-4 px-8 rounded-lg transition-colors duration-300 ease-in-out"])}," View Cart ",10,Y)])}const tt=g(W,[["render",Z],["__scopeId","data-v-733aa106"]]),et={name:"Home",components:{LessonsList:R,CartButton:tt},data(){return{cart:this.getCartFromLocalStorage()}},computed:{isCartEmpty(){return this.cart.length===0}},methods:{getCartFromLocalStorage(){const e=localStorage.getItem("cart");return e?JSON.parse(e):[]},saveCartToLocalStorage(e){localStorage.setItem("cart",JSON.stringify(e))},addToCart(e){this.cart.push(e),this.saveCartToLocalStorage(this.cart)},removeFromCart(e){this.cart=this.cart.filter(t=>t.id!==e),this.saveCartToLocalStorage(this.cart)},viewCart(){console.log("View Cart clicked!")}},watch:{cart(e){this.saveCartToLocalStorage(e)}}},st={class:"home"},rt={style:{display:"flex","justify-content":"center","align-items":"center"}};function ot(e,t,o,c,n,a){const s=_("LessonsList"),l=_("CartButton");return i(),d("div",st,[f(s),r("div",rt,[f(l)])])}const ct=g(et,[["render",ot],["__scopeId","data-v-5198ddb0"]]);export{ct as default};
