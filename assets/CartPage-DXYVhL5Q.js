import{a as x,_ as y,i as l}from"./apiClient-pAtkYp1m.js";import{c as i,a as t,F as _,g as f,t as c,w as h,i as p,n as g,j as d,f as v,k as w,h as k,o as n,b as C}from"./index-xKW8qaUr.js";const V=async r=>{try{return await x.post("/orders",r)}catch(e){throw console.error("Error submitting order:",e),e}},N={data(){return{cart:[],name:"",phone:""}},computed:{total(){return this.cart.reduce((r,e)=>r+parseFloat(e.price)*(e.quantity||1),0)},isNameValid(){return/^[A-Za-z\s]+$/.test(this.name)},isPhoneValid(){return/^[0-9]+$/.test(this.phone)},isFormValid(){return this.isNameValid&&this.isPhoneValid&&this.name&&this.phone}},methods:{removeFromCart(r,e){e.quantity>1?e.quantity--:this.cart.splice(r,1),l(`${e.subject} has been removed from your cart.`,{type:"error",autoClose:2e3}),localStorage.setItem("cart",JSON.stringify(this.cart))},async checkout(){if(this.isFormValid){const r={name:this.name,phone:this.phone,lessonIDs:this.cart.map(e=>e._id),spaces:this.cart.reduce((e,m)=>e+(m.quantity||1),0)};try{const e=await V(r);l("Order submitted successfully!",{type:"success",autoClose:3e3}),this.cart=[],this.name="",this.phone="",localStorage.removeItem("cart")}catch{l("There was an issue with your order submission.",{type:"error",autoClose:3e3})}}else l("Please fill out the form correctly.",{type:"error",autoClose:3e3})}},created(){this.cart=JSON.parse(localStorage.getItem("cart"))||[],this.cart.forEach(r=>{r.quantity||(r.quantity=1)})}},F={class:"cart-page max-w-5xl mx-auto p-6"},E={key:0,class:"text-center text-gray-500"},q={key:1},P={class:"flex items-center"},S={class:"lesson-image-container w-24 h-24 overflow-hidden mr-6 rounded-lg"},j=["src"],I={class:"lesson-title text-xl font-semibold text-gray-800 mb-1"},B={class:"lesson-location text-sm text-gray-600 mb-2"},O={class:"lesson-price text-lg font-semibold text-green-600"},T={class:"flex items-center space-x-4"},D=["onClick"],L={class:"mt-6"},z={class:"font-semibold text-xl text-gray-800 mb-4"},J={class:"checkout-form space-y-4"},U={key:0,class:"text-red-500 text-sm mt-1"},Y={key:0,class:"text-red-500 text-sm mt-1"},A=["disabled"],M={class:"mt-6 text-center"};function R(r,e,m,Z,o,a){const b=k("router-link");return n(),i("div",F,[e[4]||(e[4]=t("h2",{class:"text-3xl font-semibold mb-6 text-gray-800"},"Your Cart",-1)),o.cart.length===0?(n(),i("div",E," Your cart is empty. ")):(n(),i("div",q,[(n(!0),i(_,null,f(o.cart,(s,u)=>(n(),i("div",{key:u,class:"cart-item flex items-center justify-between p-6 mb-4 border rounded-lg shadow-lg bg-white"},[t("div",P,[t("div",S,[s.image?(n(),i("img",{key:0,src:`https://lessonsapp-backend.onrender.com${s.image}`,alt:"Lesson image",class:"w-full h-full object-cover"},null,8,j)):d("",!0)]),t("div",null,[t("h3",I,c(s.subject),1),t("p",B,c(s.location),1),t("p",O," $"+c(s.price),1)])]),t("div",T,[t("button",{onClick:G=>a.removeFromCart(u,s),class:"text-sm font-semibold bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors duration-300"}," Remove ",8,D)])]))),128)),t("div",L,[t("p",z," Total: $"+c(a.total),1),t("div",J,[t("div",null,[h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),type:"text",placeholder:"Enter your name",class:g(["w-full p-3 border rounded-lg",{"border-red-500":!a.isNameValid&&o.name!==""}])},null,2),[[p,o.name]]),!a.isNameValid&&o.name!==""?(n(),i("p",U," Enter a valid name. ")):d("",!0)]),t("div",null,[h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.phone=s),type:"text",placeholder:"Enter your phone",class:g(["w-full p-3 border rounded-lg",{"border-red-500":!a.isPhoneValid&&o.phone!==""}])},null,2),[[p,o.phone]]),!a.isPhoneValid&&o.phone!==""?(n(),i("p",Y," Enter a valid phone number. ")):d("",!0)]),t("button",{onClick:e[2]||(e[2]=(...s)=>a.checkout&&a.checkout(...s)),disabled:!a.isFormValid,class:"py-3 px-6 w-full bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-colors duration-300 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed"}," Checkout ",8,A)])])])),t("div",M,[v(b,{to:"/",class:"py-2 px-6 bg-green-500 text-white rounded-lg text-lg font-semibold hover:bg-green-600 transition-colors duration-300"},{default:w(()=>e[3]||(e[3]=[C(" Back to Lessons ")])),_:1})])])}const Q=y(N,[["render",R],["__scopeId","data-v-896fd949"]]);export{Q as default};
