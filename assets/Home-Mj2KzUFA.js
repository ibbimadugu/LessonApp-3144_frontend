import{_ as g,a as w,b as x,c as O,d as T,e as I,f as F,g as N,h as j,i as A,j as $,l as k,m as B,p as J,k as P,n as V,o as q}from"./_plugin-vue_export-helper-BblAaK5a.js";import{o as l,c as i,a,b,t as h,n as L,w as y,v as S,r as v,d as E,e as U,f,F as D,g as G,h as _}from"./index-bPzjVZG0.js";const C="/LessonApp-3144_frontend/assets/defaultimg-BTvJdqlX.png",H={name:"LessonCard",props:{lesson:{type:Object,required:!0}},computed:{lessonImage(){return{"art history":w,biology:x,chemistry:O,"computer science":T,economics:I,engineering:F,"english literature":N,french:j,geography:A,history:$,law:k,math:B,philosophy:J,physics:P,psychology:V,"music theory":q}[this.lesson.subject.toLowerCase()]||C},formattedPrice(){const e=parseFloat(this.lesson.price.replace(/[^0-9.-]+/g,""));return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e)}},methods:{addToCart(){if(this.lesson.spaces>0){this.lesson.spaces--;const e=JSON.parse(localStorage.getItem("cart"))||[];e.push({...this.lesson,quantity:1}),localStorage.setItem("cart",JSON.stringify(e)),this.$emit("update-cart"),toast(`${this.lesson.subject} added to the cart!`,{type:"success",autoClose:2e3})}}}},M={class:"lesson-card border rounded-lg shadow-lg bg-white transition-transform transform hover:scale-105 hover:shadow-xl"},R={class:"lesson-image-container w-full h-48 overflow-hidden"},z=["src"],X={key:1,src:C,"<!--":"",Fallback:"",image:"","--":""},K={class:"p-4"},Q={class:"lesson-title font-semibold text-xl text-gray-800 mb-2"},W={class:"lesson-location text-gray-600 text-sm"},Y={class:"lesson-price text-green-600 font-semibold text-lg mt-2"},Z={class:"lesson-availability text-gray-500 text-sm mt-1"},tt=["disabled"];function et(e,t,o,c,r,n){return l(),i("div",M,[a("div",R,[n.lessonImage?(l(),i("img",{key:0,src:n.lessonImage,alt:"Lesson image",class:"w-full h-full object-cover"},null,8,z)):(l(),i("img",X)),t[1]||(t[1]=b(' alt="Default Lesson image" class="w-full h-full object-cover" /> '))]),a("div",K,[a("h3",Q,h(o.lesson.subject),1),a("p",W,h(o.lesson.location),1),a("p",Y,h(n.formattedPrice),1),a("p",Z,[t[2]||(t[2]=b(" Spaces left: ")),a("span",{class:L(o.lesson.spaces===0?"text-red-500":"text-gray-500")},h(o.lesson.spaces),3)]),a("button",{disabled:o.lesson.spaces===0,onClick:t[0]||(t[0]=(...s)=>n.addToCart&&n.addToCart(...s)),class:"add-to-cart-btn mt-4 w-full bg-green-500 text-white p-2 rounded-lg text-lg transition-colors duration-300 ease-in-out hover:bg-green-600 disabled:bg-gray-400"}," Add to Cart ",8,tt)])])}const st=g(H,[["render",et],["__scopeId","data-v-3eb8fa66"]]),rt={name:"LessonFilter",props:{sortAttribute:String,sortOrder:String},emits:["update-sort"],data(){return{selectedAttribute:this.sortAttribute,selectedOrder:this.sortOrder}},methods:{updateSortOptions(){this.$emit("update-sort",this.selectedAttribute,this.selectedOrder)}}},ot={class:"lesson-filter my-4 ml-4 flex items-center gap-4"};function at(e,t,o,c,r,n){return l(),i("div",ot,[y(a("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.selectedAttribute=s),onChange:t[1]||(t[1]=(...s)=>n.updateSortOptions&&n.updateSortOptions(...s)),class:"p-2 border rounded"},t[4]||(t[4]=[a("option",{value:"subject"},"Subject",-1),a("option",{value:"location"},"Location",-1),a("option",{value:"price"},"Price",-1),a("option",{value:"spaces"},"Spaces",-1)]),544),[[S,r.selectedAttribute]]),y(a("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.selectedOrder=s),onChange:t[3]||(t[3]=(...s)=>n.updateSortOptions&&n.updateSortOptions(...s)),class:"p-2 border rounded"},t[5]||(t[5]=[a("option",{value:"asc"},"Ascending",-1),a("option",{value:"desc"},"Descending",-1)]),544),[[S,r.selectedOrder]])])}const nt=g(rt,[["render",at],["__scopeId","data-v-e037c4d4"]]),ct={baseURL:"https://your-production-url.com",headers:{"Content-Type":"application/json"},async request(e,t,o=null){const c={method:e,headers:this.headers};o&&(c.body=JSON.stringify(o));try{const r=await fetch(`${this.baseURL}${t}`,c);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("API error:",r),r}},async get(e){return this.request("GET",e)},async post(e,t){return this.request("POST",e,t)}},lt=async()=>{try{return await ct.get("/lessons")}catch(e){return console.error("Error fetching lessons:",e),[]}},it={name:"LessonsList",components:{LessonCard:st,LessonFilter:nt},setup(){const e=v([]),t=v("subject"),o=v("asc"),c=async()=>{try{e.value=await lt()}catch(s){console.error("Error fetching lessons:",s)}};E(()=>{c()});const r=U(()=>{const s=[...e.value];return s.sort((d,p)=>{const u=d[t.value],m=p[t.value];return typeof u=="string"?o.value==="asc"?u.localeCompare(m):m.localeCompare(u):typeof u=="number"?o.value==="asc"?u-m:m-u:0}),s});return{lessons:e,sortedLessons:r,sortAttribute:t,sortOrder:o,updateSort:(s,d)=>{t.value=s,o.value=d}}}},dt={class:"lesson-list grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 p-4"};function ut(e,t,o,c,r,n){const s=_("LessonFilter"),d=_("LessonCard");return l(),i("div",null,[f(s,{"sort-attribute":c.sortAttribute,"sort-order":c.sortOrder,onUpdateSort:c.updateSort},null,8,["sort-attribute","sort-order","onUpdateSort"]),a("div",dt,[(l(!0),i(D,null,G(c.sortedLessons,p=>(l(),i("div",{key:p.id,class:"lesson-item bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-xl"},[f(d,{lesson:p},null,8,["lesson"])]))),128))])])}const gt=g(it,[["render",ut]]),pt={name:"CartButton",data(){return{cartLength:this.getCartLengthFromLocalStorage()}},methods:{navigateToCart(){this.$router.push({name:"cart"})},getCartLengthFromLocalStorage(){return(JSON.parse(localStorage.getItem("cart"))||[]).length},addToCart(e){const t=JSON.parse(localStorage.getItem("cart"))||[];t.push(e),localStorage.setItem("cart",JSON.stringify(t)),this.cartLength=t.length},removeFromCart(e){let t=JSON.parse(localStorage.getItem("cart"))||[];t=t.filter(o=>o.id!==e),localStorage.setItem("cart",JSON.stringify(t)),this.cartLength=t.length}}},mt=["disabled"];function ht(e,t,o,c,r,n){return l(),i("div",null,[a("button",{disabled:r.cartLength===0,onClick:t[0]||(t[0]=(...s)=>n.navigateToCart&&n.navigateToCart(...s)),class:L([{"bg-green-500 text-white":r.cartLength>0,"bg-gray-300 text-gray-500 cursor-not-allowed":r.cartLength===0},"py-2 mt-4 px-8 rounded-lg transition-colors duration-300 ease-in-out"])}," View Cart ",10,mt)])}const ft=g(pt,[["render",ht],["__scopeId","data-v-733aa106"]]),_t={name:"Home",components:{LessonsList:gt,CartButton:ft},data(){return{cart:this.getCartFromLocalStorage()}},computed:{isCartEmpty(){return this.cart.length===0}},methods:{getCartFromLocalStorage(){const e=localStorage.getItem("cart");return e?JSON.parse(e):[]},saveCartToLocalStorage(e){localStorage.setItem("cart",JSON.stringify(e))},addToCart(e){this.cart.push(e),this.saveCartToLocalStorage(this.cart)},removeFromCart(e){this.cart=this.cart.filter(t=>t.id!==e),this.saveCartToLocalStorage(this.cart)},viewCart(){console.log("View Cart clicked!")}},watch:{cart(e){this.saveCartToLocalStorage(e)}}},vt={class:"home"},bt={style:{display:"flex","justify-content":"center","align-items":"center"}};function yt(e,t,o,c,r,n){const s=_("LessonsList"),d=_("CartButton");return l(),i("div",vt,[f(s),a("div",bt,[f(d)])])}const Ct=g(_t,[["render",yt],["__scopeId","data-v-5198ddb0"]]);export{Ct as default};
